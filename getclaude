#!/bin/bash

# Color definitions
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
CYAN='\033[0;36m'
MAGENTA='\033[0;35m'
BOLD='\033[1m'
NC='\033[0m' # No Color

# Function to print colored headers
print_header() {
    echo ""
    echo -e "${CYAN}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo -e "${CYAN}â•‘${NC} ${BOLD}${BLUE}$1${NC}"
    echo -e "${CYAN}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
}

# Function to print status messages
print_status() {
    echo -e "${GREEN}â¤${NC} ${YELLOW}$1${NC}"
}

# Function to print success messages
print_success() {
    echo -e "${GREEN}âœ“${NC} ${BOLD}${GREEN}$1${NC}"
}

# Function to print error messages
print_error() {
    echo -e "${RED}âœ—${NC} ${BOLD}${RED}$1${NC}"
}

# Main script
echo ""
echo -e "${BOLD}${MAGENTA}ğŸš€ Claude Code Installation Script${NC}"
echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"

# Install Claude Code
print_header "Installing Claude Code CLI"
print_status "Fetching and installing @anthropic-ai/claude-code..."
if npm install -g @anthropic-ai/claude-code; then
    print_success "Claude Code installed successfully!"
else
    print_error "Failed to install Claude Code"
    exit 1
fi

# Install Claude Code Router
print_header "Installing Claude Code Router"
print_status "Fetching and installing @musistudio/claude-code-router..."
if npm install -g @musistudio/claude-code-router; then
    print_success "Claude Code Router installed successfully!"
else
    print_error "Failed to install Claude Code Router"
    exit 1
fi

# Install Usage Monitor
print_header "Installing Claude Code Usage Monitor"
print_status "Fetching and installing ccusage..."
if npm install -g ccusage; then
    print_success "Usage Monitor installed successfully!"
else
    print_error "Failed to install Usage Monitor"
    exit 1
fi

# Final message
echo ""
echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
echo -e "${BOLD}${GREEN}âœ¨ All Claude Code components installed successfully!${NC}"
echo ""
echo -e "${BLUE}Available commands:${NC}"
echo -e "  ${YELLOW}claude${NC}         - Launch Claude Code CLI"
echo -e "  ${YELLOW}claude-router${NC}  - Launch Claude Code Router"
echo -e "  ${YELLOW}ccusage${NC}        - View usage statistics"
echo ""
echo -e "${CYAN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
